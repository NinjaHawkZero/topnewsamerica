(this.webpackJsonptopnewsamerica=this.webpackJsonptopnewsamerica||[]).push([[0],{217:function(e,t,r){},219:function(e,t,r){},228:function(e,t,r){},229:function(e,t,r){},316:function(e,t,r){},320:function(e,t){},322:function(e,t){},334:function(e,t){},336:function(e,t){},364:function(e,t){},366:function(e,t){},367:function(e,t){},372:function(e,t){},374:function(e,t){},393:function(e,t){},405:function(e,t){},408:function(e,t){},425:function(e,t,r){"use strict";r.r(t);var n=r(0),s=r.n(n),a=r(35),c=r.n(a),o=(r(217),r(11)),u=r(3),i=r(7),l=r.n(i),j=r(22);var p=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=localStorage.getItem(e)||t,s=Object(n.useState)(r),a=Object(u.a)(s,2),c=a[0],o=a[1];return Object(n.useEffect)((function(){null===c?localStorage.removeItem(e):localStorage.setItem(e,c)}),[e,c]),[c,o]},d=s.a.createContext(),b=(r(219),r(1));var h=function(e){var t=e.logout,r=Object(n.useContext)(d).currentUser;return Object(b.jsxs)("nav",{className:"Navigation navbar navbar-expand-md",children:[Object(b.jsx)(j.b,{className:"navbar-brand",to:"/",children:"Top News America"}),r?Object(b.jsxs)("ul",{className:"navbar-nav ml-auto",children:[Object(b.jsx)("li",{className:"nav-item mr-4",children:Object(b.jsxs)(j.c,{className:"nav-link",to:"/userProfile",children:[r.username," User Stories"]})}),Object(b.jsx)("li",{className:"nav-item",children:Object(b.jsxs)(j.b,{className:"nav-link",to:"/",onClick:t,children:["Log out ",r.username]})}),Object(b.jsx)("li",{className:"nav-item mr-4",children:Object(b.jsx)(j.c,{className:"nav-link",to:"/userDataForm",children:"Change User Data"})})]}):Object(b.jsxs)("ul",{className:"navbar-nav ml-auto",children:[Object(b.jsx)("li",{className:"nav-item mr-4",children:Object(b.jsx)(j.c,{className:"nav-link",to:"/login",children:"Login"})}),Object(b.jsx)("li",{className:"nav-item mr-4",children:Object(b.jsx)(j.c,{className:"nav-link",to:"/register",children:"Register"})})]})]})},f=r(15),m=(r(228),r(428)),v=r(430),O=(r(229),m.a.Meta);var x=function(e){var t=e.author,r=e.title,s=e.description,a=e.url,c=e.urlToImage,i=e.publishedAt,j={author:t,title:r,description:s,publishedAt:i,url:a,urlToImage:c},p=Object(n.useContext)(d).saveStory,h=Object(n.useState)(),f=Object(u.a)(h,2),x=f[0],g=f[1];function y(){return(y=Object(o.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:p(j),g(!0);case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(b.jsx)("div",{className:"Story",children:Object(b.jsxs)(m.a,{hoverable:!0,style:{width:"50%"},cover:Object(b.jsx)("img",{alt:"image",src:c,className:"img"}),children:[Object(b.jsx)(O,{title:r,description:s,publishedAt:i,author:t}),Object(b.jsx)("a",{href:a,target:"_blank",rel:"noopener noreferrer",children:Object(b.jsx)(v.a,{type:"primary",style:{marginTop:"10px"},onClick:function(e){return y.apply(this,arguments)},disabled:x,children:x?"Saved!":"View & Save"})})]},a)})};var g=function(e){var t=e.stories;return Object(b.jsx)("div",{class:"col d-flex justify-content-center",children:Object(b.jsxs)("div",{className:"StoryCardList",children:[Object(b.jsx)("h1",{className:"font-weight-bold",children:"Top News America"}),Object(b.jsx)("p",{className:"lead",children:"All of America's top stories!"}),t.map((function(e){return Object(b.jsx)(x,{author:e.author,title:e.title,description:e.description,url:e.url,publishedAt:e.publishedAt,urlToImage:e.urlToImage},e.url)}))]})})},y=r(18),w=r(19),N=r(298),S="https://topnewsamerica.herokuapp.com",k=function(){function e(){Object(y.a)(this,e)}return Object(w.a)(e,null,[{key:"request",value:function(){var t=Object(o.a)(l.a.mark((function t(r){var n,s,a,c,o,u,i=arguments;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=i.length>1&&void 0!==i[1]?i[1]:{},s=i.length>2&&void 0!==i[2]?i[2]:"get",console.debug("API Call:",r,n,s),a="".concat(S,"/").concat(r),c={Authorization:"".concat(e.token)},o="get"===s?n:{},t.prev=6,t.next=9,N({url:a,method:s,data:n,params:o,headers:c});case 9:return t.abrupt("return",t.sent.data);case 12:throw t.prev=12,t.t0=t.catch(6),console.error("API Error:",t.t0.response),u=t.t0.response.data.error.message,Array.isArray(u)?u:[u];case 17:case"end":return t.stop()}}),t,null,[[6,12]])})));return function(e){return t.apply(this,arguments)}}()},{key:"getCurrentUser",value:function(){var e=Object(o.a)(l.a.mark((function e(t){var r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.request("".concat(t));case 2:return r=e.sent,e.abrupt("return",r.user);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"updateProfile",value:function(){var e=Object(o.a)(l.a.mark((function e(t,r){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.request("".concat(t),r,"patch");case 2:return n=e.sent,e.abrupt("return",n.user);case 4:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"getStories",value:function(){var e=Object(o.a)(l.a.mark((function e(){var t,r,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.get("https://newsapi.org/v2/top-headlines?country=us&apiKey=".concat("923cdfb34c684486ae9912d7ada90b4b"));case 2:return t=e.sent,r=t.data.articles,n=r.map((function(e){return delete e.source&&delete e.content,e})),console.log(n),e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"login",value:function(){var e=Object(o.a)(l.a.mark((function e(t){var r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.request("login",t,"post");case 2:return r=e.sent,e.abrupt("return",r.token);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"register",value:function(){var e=Object(o.a)(l.a.mark((function e(t){var r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.request("register",t,"post");case 2:return r=e.sent,e.abrupt("return",r.token);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"saveStory",value:function(){var e=Object(o.a)(l.a.mark((function e(t,r){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.request("".concat(r,"/saveStory"),t,"post");case 2:return n=e.sent,e.abrupt("return",n.savedStory);case 4:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"getUserStories",value:function(){var e=Object(o.a)(l.a.mark((function e(t){var r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.request("".concat(t,"/userstories"));case 2:return r=e.sent,e.abrupt("return",r.stories);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"deleteStory",value:function(){var e=Object(o.a)(l.a.mark((function e(t,r){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.request("".concat(r,"/deleteStory"),t,"delete");case 2:return n=e.sent,e.abrupt("return",n.deleted);case 4:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()}]),e}();k.getStories();var C=k;var A=function(){var e=Object(n.useContext)(d).currentUser,t=Object(n.useState)([]),r=Object(u.a)(t,2),s=r[0],a=r[1];return Object(n.useEffect)((function(){function e(){return e=Object(o.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C.getStories();case 2:t=e.sent,a(t);case 4:case"end":return e.stop()}}),e)}))),e.apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]),Object(b.jsx)("div",{className:"Homepage",children:Object(b.jsx)("div",{className:"container",children:Object(b.jsx)("div",{children:e&&s.length>0?Object(b.jsx)("div",{className:"StoryList col-md-8 offset-md-2",children:Object(b.jsx)(g,{stories:s})}):e&&0===s.length?Object(b.jsx)("p",{className:"lead",children:"Sorry, no results were found!"}):Object(b.jsxs)("div",{children:[Object(b.jsx)("h1",{className:"font-weight-bold",children:"Top News America"}),Object(b.jsx)("p",{className:"lead",children:"All of America's top stories!"}),Object(b.jsx)("p",{children:"You need to login or register to see today's top s"})]})})})})},U=r(4),I=r(2);var T=function(e){var t=e.type,r=void 0===t?"danger":t,n=e.messages,s=void 0===n?[]:n;return console.debug("Alert","type=",r,"messages=",s),Object(b.jsx)("div",{className:"alert alert-".concat(r),role:"alert",children:s.map((function(e){return Object(b.jsx)("p",{className:"mb-0 small",children:e},e)}))})};var P=function(e){var t=e.login,r=Object(f.g)(),s=Object(n.useState)({username:"",password:""}),a=Object(u.a)(s,2),c=a[0],i=a[1],j=Object(n.useState)([]),p=Object(u.a)(j,2),d=p[0],h=p[1];function m(e){return v.apply(this,arguments)}function v(){return(v=Object(o.a)(l.a.mark((function e(n){var s;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),e.next=3,t(c);case 3:(s=e.sent).success?r.push("/stories"):h(s.errors);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function O(e){var t=e.target,r=t.name,n=t.value;i((function(e){return Object(I.a)(Object(I.a)({},e),{},Object(U.a)({},r,n))}))}return Object(b.jsx)("div",{className:"LoginForm",children:Object(b.jsxs)("div",{className:"container col-md-6 offset-md-3 col-lg-4 offset-lg-4",children:[Object(b.jsx)("h3",{className:"mb-3",children:"Log In"}),Object(b.jsx)("div",{className:"card",children:Object(b.jsx)("div",{className:"card-body",children:Object(b.jsxs)("form",{onSubmit:m,children:[Object(b.jsxs)("div",{className:"form-group",children:[Object(b.jsx)("label",{children:"Username"}),Object(b.jsx)("input",{name:"username",className:"form-control",value:c.username,onChange:O,autoComplete:"username",required:!0})]}),Object(b.jsxs)("div",{className:"form-group",children:[Object(b.jsx)("label",{children:"Password"}),Object(b.jsx)("input",{type:"password",name:"password",className:"form-control",value:c.password,onChange:O,autoComplete:"current-password",required:!0})]}),d.length?Object(b.jsx)(T,{type:"danger",messages:d}):null,Object(b.jsx)("button",{className:"btn btn-primary float-right",onSubmit:m,children:"Submit"})]})})})]})})};var q=function(e){var t=e.register,r=Object(f.g)(),s=Object(n.useState)({username:"",password:""}),a=Object(u.a)(s,2),c=a[0],i=a[1],j=Object(n.useState)([]),p=Object(u.a)(j,2),d=p[0],h=p[1];function m(e){return v.apply(this,arguments)}function v(){return(v=Object(o.a)(l.a.mark((function e(n){var s;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),e.next=3,t(c);case 3:(s=e.sent).success?r.push("/stories"):h(s.errors);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function O(e){var t=e.target,r=t.name,n=t.value;i((function(e){return Object(I.a)(Object(I.a)({},e),{},Object(U.a)({},r,n))}))}return Object(b.jsx)("div",{className:"SignupForm",children:Object(b.jsxs)("div",{className:"container col-md-6 offset-md-3 col-lg-4 offset-lg-4",children:[Object(b.jsx)("h2",{className:"mb-3",children:"Register For TopNewsAmerica"}),Object(b.jsx)("div",{className:"card",children:Object(b.jsx)("div",{className:"card-body",children:Object(b.jsxs)("form",{onSubmit:m,children:[Object(b.jsxs)("div",{className:"form-group",children:[Object(b.jsx)("label",{children:"Username"}),Object(b.jsx)("input",{name:"username",className:"form-control",value:c.username,onChange:O})]}),Object(b.jsxs)("div",{className:"form-group",children:[Object(b.jsx)("label",{children:"Password"}),Object(b.jsx)("input",{type:"password",name:"password",className:"form-control",value:c.password,onChange:O})]}),d.length?Object(b.jsx)(T,{type:"danger",messages:d}):null,Object(b.jsx)("button",{type:"submit",className:"btn btn-primary float-right",onSubmit:m,children:"Submit"})]})})})]})})};r(316);var F=function(e){var t=e.id,r=(e.savedBy,e.author),s=e.title,a=e.description,c=e.publishedAt,u=e.url,i=e.urlToImage,j=e.stories,p=e.setStories,h=Object(n.useContext)(d).removeStory,f={id:t};function m(){return(m=Object(o.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:h(f),p(j.filter((function(e){return e.id!==t})));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(b.jsx)("div",{className:"StoryCard",children:Object(b.jsxs)("div",{className:"card-body",children:[Object(b.jsxs)("h6",{className:"card-title",children:[s,i&&Object(b.jsx)("img",{src:i,className:"float-right ml-5"}),"  "]}),Object(b.jsx)("p",{children:r}),Object(b.jsx)("div",{children:Object(b.jsx)("small",{children:u})}),Object(b.jsx)("div",{children:Object(b.jsx)("small",{children:c})}),Object(b.jsx)("div",{children:Object(b.jsx)("p",{children:a})}),Object(b.jsx)("button",{className:"btn btn-danger font-weight-bold text-uppercase float-right",onClick:function(){return m.apply(this,arguments)},children:"Remove Story"})]})})};var L=function(e){var t=e.stories,r=e.setStories;return Object(b.jsx)("div",{className:"userStoryCardList",children:t.map((function(e){return Object(b.jsx)(F,{id:e.id,savedBy:e.savedBy,author:e.author,title:e.title,description:e.description,publishedAt:e.publishedAt,urlToImage:e.urlToImage,stories:t,setStories:r},e.id)}))})};var D=function(){var e=Object(n.useContext)(d).currentUser,t=Object(n.useState)([]),r=Object(u.a)(t,2),s=r[0],a=r[1];return Object(n.useEffect)((function(){function t(){return t=Object(o.a)(l.a.mark((function t(){var r;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,C.getUserStories(e.username);case 2:r=t.sent,a(r);case 4:case"end":return t.stop()}}),t)}))),t.apply(this,arguments)}!function(){t.apply(this,arguments)}()}),[]),Object(b.jsx)("div",{className:"userStoryList col-md-8 offset-md-2",children:s&&s.length>0?Object(b.jsx)(L,{stories:s,setStories:a}):Object(b.jsx)("p",{className:"lead",children:"Sorry, no results were found!"})})};var E=function(){var e=Object(n.useContext)(d),t=e.currentUser,r=e.setCurrentUser,s=Object(n.useState)({username:t.username,password:""}),a=Object(u.a)(s,2),c=a[0],i=a[1],j=Object(n.useState)([]),p=Object(u.a)(j,2),h=p[0],f=p[1],m=Object(n.useState)(!1),v=Object(u.a)(m,2),O=v[0],x=v[1];function g(){return(g=Object(o.a)(l.a.mark((function e(n){var s,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),s=c,e.prev=2,e.next=5,C.updateProfile(t.username,s);case 5:a=e.sent,e.next=12;break;case 8:return e.prev=8,e.t0=e.catch(2),f(e.t0),e.abrupt("return");case 12:i((function(e){return Object(I.a)(Object(I.a)({},e),{},{password:""})})),f([]),x(!0),r(a);case 16:case"end":return e.stop()}}),e,null,[[2,8]])})))).apply(this,arguments)}function y(e){var t=e.target,r=t.name,n=t.value;i((function(e){return Object(I.a)(Object(I.a)({},e),{},Object(U.a)({},r,n))})),f([])}return Object(b.jsxs)("div",{className:"col-md-6 col-lg-4 offset-md-3 offset-lg-4",children:[Object(b.jsx)("h3",{children:"Profile"}),Object(b.jsx)("div",{className:"card",children:Object(b.jsx)("div",{className:"card-body",children:Object(b.jsxs)("form",{children:[Object(b.jsxs)("div",{className:"form-group",children:[Object(b.jsx)("label",{children:"Username"}),Object(b.jsx)("input",{name:"username",className:"form-control",value:c.username,onChange:y})]}),Object(b.jsxs)("div",{className:"form-group",children:[Object(b.jsx)("label",{children:"Confirm password to make changes:"}),Object(b.jsx)("input",{type:"password",name:"password",className:"form-control",value:c.password,onChange:y})]}),h.length?Object(b.jsx)(T,{type:"danger",messages:h}):null,O?Object(b.jsx)(T,{type:"success",messages:["Updated successfully."]}):null,Object(b.jsx)("button",{className:"btn btn-primary btn-block mt-4",onClick:function(e){return g.apply(this,arguments)},children:"Save Changes"})]})})})]})};var B=function(e){var t=e.exact,r=e.path,s=e.children;return Object(n.useContext)(d).currentUser?Object(b.jsx)(f.b,{exact:t,path:r,children:s}):Object(b.jsx)(f.a,{to:"/login"})};var R=function(e){var t=e.login,r=e.register;return Object(b.jsx)("div",{className:"pt-5",children:Object(b.jsxs)(f.d,{children:[Object(b.jsx)(f.b,{exact:!0,path:"/",children:Object(b.jsx)(A,{})}),Object(b.jsx)(f.b,{exact:!0,path:"/login",children:Object(b.jsx)(P,{login:t})}),Object(b.jsx)(f.b,{exact:!0,path:"/register",children:Object(b.jsx)(q,{register:r})}),Object(b.jsx)(B,{path:"/userDataForm",children:Object(b.jsx)(E,{})}),Object(b.jsx)(B,{path:"/userProfile",children:Object(b.jsx)(D,{})}),Object(b.jsx)(f.a,{to:"/"})]})})},J=r(211),M=r.n(J);var z=function(){var e=Object(n.useState)(!1),t=Object(u.a)(e,2),r=(t[0],t[1]),s=Object(n.useState)(null),a=Object(u.a)(s,2),c=a[0],i=a[1],f=p("News-Token"),m=Object(u.a)(f,2),v=m[0],O=m[1];function x(){return(x=Object(o.a)(l.a.mark((function e(t){var r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,C.register(t);case 3:return r=e.sent,O(r),e.abrupt("return",{success:!0});case 8:return e.prev=8,e.t0=e.catch(0),console.error("Registration Failed",e.t0),e.abrupt("return",{success:!1,err:e.t0});case 12:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}function g(){return(g=Object(o.a)(l.a.mark((function e(t){var r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,C.login(t);case 3:return r=e.sent,O(r),e.abrupt("return",{success:!0});case 8:return e.prev=8,e.t0=e.catch(0),console.error("login failed",e.t0),e.abrupt("return",{success:!1,err:e.t0});case 12:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}function y(){return(y=Object(o.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,C.saveStory(t,c.username);case 3:return e.sent,e.abrupt("return",{success:!0});case 7:return e.prev=7,e.t0=e.catch(0),console.error("Could not save story",e.t0),e.abrupt("return",{success:!1,err:e.t0});case 11:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}function w(){return(w=Object(o.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,C.deleteStory(t,c.username);case 3:return e.sent,e.abrupt("return",{success:!0});case 7:return e.prev=7,e.t0=e.catch(0),console.error("Could not remove story",e.t0),e.abrupt("return",{success:!1,err:e.t0});case 11:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}return Object(n.useEffect)((function(){function e(){return(e=Object(o.a)(l.a.mark((function e(){var t,n,s;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!v){e.next=14;break}return e.prev=1,t=M.a.decode(v),n=t.username,C.token=v,e.next=6,C.getCurrentUser(n);case 6:s=e.sent,i(s),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(1),console.error("App loadUserInfo: problem loading info",e.t0),i(null);case 14:r(!0);case 15:case"end":return e.stop()}}),e,null,[[1,10]])})))).apply(this,arguments)}r(!1),function(){e.apply(this,arguments)}()}),[v]),Object(b.jsx)(j.a,{children:Object(b.jsx)(d.Provider,{value:{currentUser:c,setCurrentUser:i,saveStory:function(e){return y.apply(this,arguments)},removeStory:function(e){return w.apply(this,arguments)}},children:Object(b.jsxs)("div",{className:"App",children:[Object(b.jsx)(h,{logout:function(){i(null),O(null)}}),Object(b.jsx)(R,{login:function(e){return g.apply(this,arguments)},register:function(e){return x.apply(this,arguments)}})]})})})},H=function(e){e&&e instanceof Function&&r.e(3).then(r.bind(null,431)).then((function(t){var r=t.getCLS,n=t.getFID,s=t.getFCP,a=t.getLCP,c=t.getTTFB;r(e),n(e),s(e),a(e),c(e)}))};c.a.render(Object(b.jsx)(s.a.StrictMode,{children:Object(b.jsx)(z,{})}),document.getElementById("root")),H()}},[[425,1,2]]]);
//# sourceMappingURL=main.a4ebc689.chunk.js.map